# Initial expectations

## Introduction

[Jest](https://jestjs.io/) has its reasons to be the number one choice for JS testing among web engineers. One of it's strenghts is the usage simplicity.
We'll start with exploring [globals](https://jestjs.io/docs/en/api):

- Use `it()` to create a single test method.
- Use `describe()` to group related tests.
- Use [`expect()`](https://jestjs.io/docs/en/expect) to make assertions.

### ðŸ’¡ Good practices

- A good test description should include 3 things:
  - What's being tested;
  - What's the scenario/conditions;
  - What's the expected result;
- Structure each test by the _AAA pattern_, which stands for _Arrange, Act & Assert_. This helps keeping the tests understable for everyone who will read the tests.
- Start with the simplest scenarios (happy path) first. Add more conditions and complex cases afterwards.

```js
describe('Animals', () => {
  it('A dog has one life', () => {
    // Everything "compacted" works fine, but it can get messy
    // to understand when applied in complex real-world scenarios
    expect(getAnimalDetails({ type: 'dog' }).lives).toBe(1)
  })

  it('A cat has 9 lives, when borned in Spain', () => {
    // Structuring with AAA, makes it easier to understand
    // Arrange
    const type = 'cat'
    const country: 'spain'
    const livesNr = 9

    // Act
    const details = getAnimalDetails({ type, country })

    // Assert
    expect(details.lives).toBe(livesNr)
  })

  it('returns null, given a unknown animal', () => {
    // Arrange
    const type = 'tree'

    // Act
    const details = getAnimalDetails({ type })

    // Assert
    expect(details).toBeNull()
  })
})
```

## Exercise

In the file `1.1.js`, there are three functions. Write the necessary tests for each one. Remember to:

- Write short but consice descriptions
- Start by covering the essential use cases.

## Bonus

### #1 Repetitive tests

While testing `isSmallerThan10`, you wrote (I hope) two similar tests, with different data. Using [`jest.each`](https://jestjs.io/docs/en/api#testeachtablename-fn-timeout) allows you to write the test just once.

- Rewrite the tests for `isSmallerThan10` using `jest.each`.

### #2 Asserting dynamic results

In the same file, there's a function `getAuthor()` that returns data as an `object`. How would we assert it?

Explore multiple assertion solutions besides `toEqual()`:

- Using [snapshots](https://jestjs.io/docs/en/expect#tomatchsnapshotpropertymatchers-hint) (traditional and inline);
- Using flexible matchers. For example: [`objectContaining()`](https://jestjs.io/docs/en/expect#expectobjectcontainingobject), `expect.any`, etc...

## References

- [Jest API - globals](https://jestjs.io/docs/en/api)
- [Jest API - expect](https://jestjs.io/docs/en/expect)
